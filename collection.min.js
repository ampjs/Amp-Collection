!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@ampersarnie/collection",[],e):"object"==typeof exports?exports["@ampersarnie/collection"]=e():t["@ampersarnie/collection"]=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);n.d(e,"Implements",function(){return i.a}),n.d(e,"Interface",function(){return i.b}),n.d(e,"Trait",function(){return i.c})},function(t,e,n){"use strict";var i=n(2),r=n(3);n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return r.a}),n.d(e,"a",function(){return s});class s{constructor(t,...e){return this.implements=t,this._CheckInterfaces(),this._AttachTraits(...e),this.implements}_AttachTraits(...t){this.attach(new r.a(this.implements,...t))}_CheckInterfaces(){this.attach(new i.a(this.implements))}attach(t){if("undefined"==typeof t.implements)throw new Error("Cannot attach an unimplemented class.");this.implements=t.implements,Object.defineProperty(this.implements.prototype,t.constructor.name,{configurable:!0,enumerable:!1,editable:!1,writable:!1,value:t})}static dependancy(t,...e){if(e[0]instanceof t)return e;let n=[];for(let i in e)n.push(e[i]);return new t(...n)}}},function(t,e){"use strict";class n{constructor(t){return this.implements=t,this.attached={interfaces:[],methods:[]},this.exceptions=["constructor","length","name","prototype"],this.check(),this.current=null,this}static apply(t,e=[]){return"undefined"==typeof t.prototype.interfaces&&Object.defineProperty(t.prototype,"interfaces",{value:()=>{return e}}),new this(t)}get interfaces_is_func(){return"function"==typeof this.implements.prototype.interfaces}get interfaces_is_object(){return Array.isArray(this.implements.prototype.interfaces())}get implementNonStaticProps(){return Object.getOwnPropertyNames(this.implements.prototype)}get implementStaticProps(){return Object.getOwnPropertyNames(this.implements)}get implementProps(){return this.implementNonStaticProps.concat(this.implementStaticProps)}get interface(){return this.interfaces_is_func&&this.interfaces_is_object?this.implements.prototype.interfaces():[]}_getMethod(t,e){let n=e.prototype[t];return"undefined"==typeof n?(n=e[t],"undefined"==typeof n?null:n):n}except(...t){for(let e in t)this.exceptions.push(t[e]);return this}interfaceMethods(...t){let e=[];for(let n in t){let i=Object.getOwnPropertyNames(t[n]);e=e.concat(i)}return e[Symbol.iterator]()}check(){let t=this.interface;for(let e in t){if("undefined"==typeof t[e])throw new Error("Interface: cannot check an interface, the class seems to be undefined.\\nAre you using named imports where you shouldn\\'t?");this.current=t[e];let n=this.interfaceMethods(this.current.prototype,this.current);this.iteratorLoop(n,this._checkInterface.bind(this)),this.attached.interfaces.push(this.current.name)}}iteratorLoop(t,e){for(let n=t.next();!1===n.done;)-1===this.exceptions.indexOf(n.value)&&e(n.value),n=t.next()}_checkInterface(t){if(-1===this.implementProps.indexOf(t))throw new Error(`Interface: ${t} required in ${this.implements.name}`);if(!this._checkInterfaceArguments(t))throw new Error(`Interface: ${t} arguments do not match.`);return this.attached.methods.push(t),this}_checkInterfaceArguments(t){let e=this._interfaceArguments(this._getMethod(t,this.implements)),n=this._interfaceArguments(this._getMethod(t,this.current));return!(n!==e)}_interfaceArguments(t){let e=t.toString().match(/.*?\(([^)]*)\)/);return"undefined"==typeof e?"":e[1]}}e.a=n},function(t,e){"use strict";class n{constructor(t,...e){return this.implements=t,this.except_methods=["constructor","prototype","name"],this.attached={traits:[],methods:[]},this.addArray(),0<e.length?this._(...e):this}_(...t){return new this.implements(...t)}get traits(){return this.traits_is_func&&this.traits_is_object?this.implements.prototype.traits():[]}get traits_is_func(){return"function"==typeof this.implements.prototype.traits}get traits_is_object(){return Array.isArray(this.implements.prototype.traits())}get implementProps(){return Object.getOwnPropertyNames(this.implements.prototype)}addArray(t=null){let e=t||this.traits;for(let n of e)this.add(n),this.attached.traits.push(n.name);return this}add(t={}){for(let e of Reflect.ownKeys(t.prototype))this.addMethod(e,this._getDescriptor(t.prototype,e));return this}addMethod(t,e){-1===this.except_methods.indexOf(t)&&-1===this.implementProps.indexOf(t)&&(Object.defineProperty(this.implements.prototype,t,e),this.attached.methods.push(t))}_getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}}e.a=n},function(t,e,n){!function(t,e){e(n(0))}(this,function(e){"use strict";class n{filter(t){for(let e=0;e<this._data.length;e++)this._data[e]=t(e,this.get(e));return this}unique(t){let e=[],n=t||"__FingerPrint__";for(let i,r=0;r<this.data.length;r++)i=this.data[r][n],this.doWhere([],n,"=",i),1===this.processed.length&&e.push(this.processed[0]);return this._processed=e,this}only(t){let e=[];for(let n in t)for(let i in this._data)"undefined"==typeof e[i]&&(e[i]=[]),e[i][t[n]]=this._data[i][t[n]];return this._processed=e,this}except(t){this._processed=this._data;let e=[];for(let n,i=0;i<this.processed.length;i++)for(let r in n=this.processed[i],e[i]={},n)-1===t.indexOf(r)&&(e[i][r]=n[r]);return this._processed=e,this}}class i{generate(t){let e=0,n=0;if(0===t.length)return e;for(let i=0;i<t.length;i++)n=t.charCodeAt(i),e=(e<<5)-e+n,e&=e;return Math.abs(e)}createGetter(t){let e=JSON.stringify(t);return t.__FingerPrint__?t:(Object.defineProperty(t,"__FingerPrint__",{enumerable:!1,get:()=>{return this.generate(e)}}),t)}addPrints(t){if(!Array.isArray(t))return this.createGetter(t);for(let e=0;e<t.length;e++)t[e]=this.createGetter(t[e]);return t}}class r{has(t){let e=!1;for(let n=0;n<this.data.length;n++)e=this._isDotNotation(t)?this._dotNotatedHas(this.data[n],t):this._singularHas(this.data[n],t);return e}_dotNotatedHas(t,e){let n="",i=this._getDotNotation(e),r=t;for(let s in i){if(n=i[s],"undefined"==typeof r[n])return!1;r=r[n]}return!0}_singularHas(t,e){return"undefined"!=typeof t[e]}isEmpty(){let t=this._data;return!(0<t.length)}}class s{schema(t,e){return this._schema=t.sort(),this._schemaStrict=e||!1,this}checkSchema(t){return Array.isArray(this._schema)?this._schemaStrict?this._strictSchema(t):this._nonStrictSchema(t):t}_strictSchema(t){let e=Object.keys(t).sort();if(JSON.stringify(e)!==JSON.stringify(this._schema))throw new Error("Collection: Schema in strict mode -- keys do not match."+`Expecting: ${this._schema} - given; ${e}`);return t}_nonStrictSchema(t){for(let e=0;e<this._schema.length;e++)t.hasOwnProperty(this._schema[e])||console.warn("Collection:",`key "${this._schema[e]}" missing from collection.`);return t}}class o{where(t,e,n){return 2===arguments.length&&(n=e,e="="),this.doWhere([],t,e,n)}orWhere(t,e,n){return 2===arguments.length&&(n=e,e="="),this.doWhere(this.processed,t,e,n)}doWhere(t,e,n,i){this._processed=t;for(let r=0;r<this.data.length;r++)this._isDotNotation(e)?this._dotNotatedWhere(this.data[r],e,n,i):this._singularWhere(r,this.data[r][e],n,i);return this}_dotNotatedWhere(t,e,n,i){let r="",s=this._getDotNotation(e),o=t,h=!1;for(let c in s)if(r=s[c],"undefined"!=typeof o[r]&&(o=o[r],!Array.isArray(o)&&o!==Object(o))){h=this._whereOperators(o,n,i);break}return h&&this.processed.push(t),this}_singularWhere(t,e,n,i){if("undefined"==typeof e)return this;let r=this._whereOperators(e,n,i);return r&&this.processed.push(this.data[t]),this}_whereOperators(t,e,n){switch(e){default:case"=":case"==":return t==n;case"===":return t===n;case">":return t>n;case">=":return t>=n;case"<":return t<n;case"<=":return t<=n}}}class h{constructor(t){return this.FingerPrint=new i,this.data=[],this.setData=t||[],this._processed=[],this._isProcessed=!1,this}traits(){return[o,r,s,n]}get _data(){return this._isProcessed?this.processed:this.data}set _processed(t){this._isProcessed=!0,this.processed=t}set setData(t){this.data=[],Array.isArray(t)?this.data=this.nestedCollection(t):this.data.push(t),this.data=this.FingerPrint.addPrints(this.data)}nestedCollection(t){let e={};for(let n in t)for(let i in t[n])e=t[n][i],"object"==typeof e&&null!==e&&"object"==typeof e[0]&&(t[n][i]=new h(e));return t}all(){let t=this._data;return this.reset(),t}first(){let t=this._data[0];return this.reset(),t}get(t){if("undefined"==typeof this._data[t])return null;let e=this._data[t];return this.reset(),e}addItem(t){return this.data.push(this.checkSchema(t)),this.setData=this.data,this}addItems(t=[]){return this.data.push(...t),this.setData=this.data,this}reset(){return this._processed=this.data,this._isProcessed=!1,this}_isDotNotation(t=""){return-1!==t.indexOf(".")}_getDotNotation(t=""){return t.split(".")}}var c=new e.Implements(h);class u extends c{constructor(t,e){super(t);let n=e||!1;this.pages={},n&&this.paginate(n)}paginate(t){let e=t||5,n=[];e=this.data.length/e;for(let i=0,r=0;r<e;r+=1,i+=t)n[r]=this.data.slice(i,i+t);return this.pages={current:1,next:2,previous:1,last:n.length,chunks:t},this._processed=n,this}_getPage(t){let e=t+1,n=t-1;t>=this.pages.last&&(e=this.pages.last),1>=t&&(n=1),this._setPages(t,e,n),this._processed=this._data[t-1]}_setPages(t,e,n){this.pages.current=t,this.pages.next=e,this.pages.previous=n}page(t){return this._getPage(t||1),this}next(){return this._getPage(this.pages.next),this}previous(){return this._getPage(this.pages.previous),this}}window.Collection=c,window.PaginatedCollection=u,t.exports={Collection:c,PaginatedCollection:u}})}])});